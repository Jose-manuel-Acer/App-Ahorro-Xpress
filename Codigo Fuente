// Importaciones necesarias
import 'package:flutter/material.dart'; // Framework principal de Flutter
import 'package:flutter/services.dart'; // Permite el uso de formatos y restricciones en entradas de texto
import 'package:google_maps_flutter/google_maps_flutter.dart'; // Biblioteca para integrar Google Maps en Flutter

// Punto de entrada principal de la aplicaci贸n
void main() {
  runApp(MyApp());
}

// Widget principal de la aplicaci贸n
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      // Define la pantalla inicial de la aplicaci贸n
      home: FirstScreen(), // Pantalla inicial configurada como 'FirstScreen'
    );
  }
}

// Primera pantalla que se muestra al abrir la aplicaci贸n
class FirstScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.blue, // Fondo azul para la pantalla inicial
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center, // Centra los elementos en la pantalla
          children: [
            Image.asset('assets/AEx1.png'), // Muestra una imagen desde los assets
            SizedBox(height: 50), // Espaciado entre la imagen y el bot贸n
            IconButton(
              icon: Icon(Icons.arrow_forward), // cono de flecha hacia adelante
              color: Colors.white, // Color del 铆cono
              iconSize: 40.0, // Tama帽o del 铆cono
              onPressed: () {
                // Acci贸n al presionar el 铆cono
                // Navega a la pantalla de Login
                Navigator.push(
                  context,
                  MaterialPageRoute(builder: (context) => LoginScreen()),
                );
              },
            ),
          ],
        ),
      ),
    );
  }
}
// Pantalla de registro de usuario
class RegisterScreen extends StatelessWidget {
  // Controladores para los campos de texto
  final TextEditingController nameController = TextEditingController();
  final TextEditingController lastNameController = TextEditingController();
  final TextEditingController emailController = TextEditingController();
  final TextEditingController usernameController = TextEditingController();
  final TextEditingController passwordController = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.white, // Fondo blanco para la pantalla de registro
      body: Center(
        child: SingleChildScrollView(
          child: Container(
            decoration: BoxDecoration(
              border: Border.all(color: Colors.blue), // Borde azul alrededor del formulario
              boxShadow: [
                BoxShadow(
                  color: const Color.fromARGB(255, 255, 254, 254),
                  blurRadius: 5.0, // Sombra sutil para el formulario
                ),
              ],
            ),
            padding: EdgeInsets.all(16.0), // Espaciado interno del formulario
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: [
                Text(
                  'Registro',
                  style: TextStyle(
                    fontSize: 24,
                    fontWeight: FontWeight.bold,
                    color: Colors.blue, // T铆tulo en azul
                  ),
                ),
                SizedBox(height: 20), // Espaciado entre el t铆tulo y los campos
                // Campos de entrada
                TextField(
                  controller: nameController,
                  decoration: InputDecoration(
                    hintText: 'Nombre',
                    hintStyle: TextStyle(
                      color: const Color.fromARGB(255, 3, 3, 3).withOpacity(0.6),
                    ),
                    border: OutlineInputBorder(),
                  ),
                ),
                SizedBox(height: 10), // Espaciado entre los campos
                TextField(
                  controller: lastNameController,
                  decoration: InputDecoration(
                    hintText: 'Apellidos',
                    hintStyle: TextStyle(
                      color: const Color.fromARGB(255, 0, 0, 0).withOpacity(0.6),
                    ),
                    border: OutlineInputBorder(),
                  ),
                ),
                SizedBox(height: 10),
                TextField(
                  controller: emailController,
                  decoration: InputDecoration(
                    hintText: 'Correo electr贸nico',
                    hintStyle: TextStyle(
                      color: const Color.fromARGB(255, 0, 0, 0).withOpacity(0.6),
                    ),
                    border: OutlineInputBorder(),
                  ),
                ),
                SizedBox(height: 10),
                TextField(
                  controller: usernameController,
                  decoration: InputDecoration(
                    hintText: 'Usuario',
                    hintStyle: TextStyle(
                      color: const Color.fromARGB(255, 2, 2, 2).withOpacity(0.6),
                    ),
                    border: OutlineInputBorder(),
                  ),
                ),
                SizedBox(height: 10),
                TextField(
                  controller: passwordController,
                  obscureText: true, // Oculta el texto ingresado
                  decoration: InputDecoration(
                    hintText: 'Contrase帽a',
                    hintStyle: TextStyle(
                      color: const Color.fromARGB(255, 0, 0, 0).withOpacity(0.6),
                    ),
                    border: OutlineInputBorder(),
                  ),
                ),
                SizedBox(height: 20),
                ElevatedButton(
                  onPressed: () {
                    // Validaciones de los campos
                    if (!RegExp(r'^[A-Z][a-z]{5}[0-9]$')
                        .hasMatch(usernameController.text)) {
                      ScaffoldMessenger.of(context).showSnackBar(
                        SnackBar(
                          content: Text(
                            'El usuario debe tener 1 may煤scula, 5 min煤sculas y 1 n煤mero.',
                          ),
                        ),
                      );
                      return;
                    }
                    if (!RegExp(r'^\d{5}[A-Z]$')
                        .hasMatch(passwordController.text)) {
                      ScaffoldMessenger.of(context).showSnackBar(
                        SnackBar(
                          content: Text(
                            'La contrase帽a debe tener 5 n煤meros seguidos y 1 may煤scula.',
                          ),
                        ),
                      );
                      return;
                    }

                    // Mostrar di谩logo emergente y navegar a LoginScreen
                    showDialog(
                      context: context,
                      barrierDismissible: false,
                      builder: (context) => AlertDialog(
                        title: Text('Guardado'),
                        content: Text(
                          'Tu usuario y contrase帽a han sido registrados correctamente.',
                        ),
                        actions: [
                          TextButton(
                            onPressed: () {
                              Navigator.pop(context); // Cierra el di谩logo
                              Navigator.pushReplacement(
                                context,
                                MaterialPageRoute(
                                  builder: (context) => WelcomeScreen(
                                    registeredUser: '',
                                  ),
                                ),
                              );
                            },
                            child: Text('Aceptar'),
                          ),
                        ],
                      ),
                    );
                  },
                  child: Text('Guardar'),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}
// Pantalla de inicio de sesi贸n
class LoginScreen extends StatelessWidget {
  // Controladores para los campos de texto
  final TextEditingController usernameController = TextEditingController();
  final TextEditingController passwordController = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de aplicaci贸n con color de fondo azul
      appBar: AppBar(
        backgroundColor: Colors.blue,
        // Bot贸n de men煤 en la esquina izquierda
        leading: IconButton(
          icon: Icon(Icons.menu, color: Colors.white), // Icono de men煤
          onPressed: () {
            // Navega a la pantalla de men煤
            Navigator.push(
              context,
              MaterialPageRoute(builder: (context) => MenuScreen()),
            );
          },
        ),
        // T铆tulo de la barra de aplicaci贸n con una imagen
        title: Image.asset(
          'assets/AEx1.png', // Ruta de la imagen en los assets
          height: 50,
        ),
        centerTitle: true, // Centra el t铆tulo en la barra
        actions: [
          // Bot贸n de calculadora en la esquina derecha
          IconButton(
            icon: Icon(Icons.calculate, color: Colors.white), // Icono de calculadora
            onPressed: () {
              // Navega a la pantalla de presupuesto
              Navigator.push(
                context,
                MaterialPageRoute(builder: (context) => BudgetScreen()),
              );
            },
          ),
        ],
      ),
      // Cuerpo de la pantalla con desplazamiento
      body: SingleChildScrollView(
        // Soluci贸n para evitar desbordamientos en pantallas peque帽as
        child: Column(
          children: [
            SizedBox(height: 20), // Espaciado opcional
            Container(
              color: Colors.blue[50], // Fondo azul claro para el contenedor
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: [
                  // Imagen en la parte inferior de la pantalla
                  Image.asset(
                    'assets/AEx1.png', // Ruta de la imagen en los assets
                    width: double.infinity, // Ancho completo
                    fit: BoxFit.cover, // Ajuste de la imagen
                  ),
                  Padding(
                    padding: const EdgeInsets.all(16.0), // Espaciado interno
                    child: Column(
                      children: [
                        // Texto de bienvenida
                        Text(
                          'Hola, ten un buen d铆a!',
                          style: TextStyle(
                              fontSize: 18, fontWeight: FontWeight.bold),
                        ),
                        SizedBox(height: 10), // Espaciado entre el texto y los botones
                        Row(
                          mainAxisAlignment: MainAxisAlignment.spaceBetween,
                          children: [
                            Flexible(
                              flex: 2,
                              child: Padding(
                                padding: const EdgeInsets.symmetric(horizontal: 8.0),
                                child: ElevatedButton(
                                  style: ElevatedButton.styleFrom(
                                    backgroundColor: Colors.red, // Bot贸n rojo
                                  ),
                                  onPressed: () {
                                    // Navega a la pantalla de registro
                                    Navigator.push(
                                      context,
                                      MaterialPageRoute(
                                          builder: (context) => RegisterScreen()),
                                    );
                                  },
                                  child: Text('Registrarse'),
                                ),
                              ),
                            ),
                            Flexible(
                              flex: 2,
                              child: Padding(
                                padding: const EdgeInsets.symmetric(horizontal: 8.0),
                                child: ElevatedButton(
                                  style: ElevatedButton.styleFrom(
                                    backgroundColor: Colors.white,
                                    foregroundColor: Colors.black,
                                  ),
                                  onPressed: () {
                                    // Navega a la pantalla de inicio de sesi贸n
                                    Navigator.push(
                                      context,
                                      MaterialPageRoute(
                                          builder: (context) => NextScreen()),
                                    );
                                  },
                                  child: Text('Iniciar sesi贸n'),
                                ),
                              ),
                            ),
                          ],
                        ),
                      ],
                    ),
                  ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }
}
// Definici贸n de la clase NextScreen que extiende StatelessWidget
class NextScreen extends StatelessWidget {
  // Controladores para los campos de texto de usuario y contrase帽a
  final TextEditingController _usernameController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de aplicaci贸n con t铆tulo "Inicio de sesi贸n"
      appBar: AppBar(
        title: Text('Inicio de sesi贸n'),
      ),
      // Cuerpo de la pantalla con un Padding para el espaciado
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            // Logo en la parte superior
            Image.asset(
              'assets/AEX2.1.png', // Ruta de la imagen del logo
              height: 100, // Altura de la imagen
            ),
            SizedBox(height: 20), // Espaciado entre la imagen y el texto
            // Etiqueta "Inicio de sesi贸n"
            Text(
              'Inicio de sesi贸n',
              style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 40), // Espaciado entre el texto y los campos de texto
            // Primer campo de texto para el usuario
            TextField(
              controller: _usernameController, // Asignaci贸n del controlador
              decoration: InputDecoration(
                labelText: 'PON AQU TU USUARIO', // Etiqueta del campo
                hintText: 'Ej: Usuario1', // Texto de sugerencia
                border: OutlineInputBorder(), // Borde del campo
              ),
              textCapitalization: TextCapitalization.words, // Capitaliza la primera letra de cada palabra
              inputFormatters: [
                // Restringe la entrada a una letra may煤scula seguida de letras y n煤meros
                FilteringTextInputFormatter.allow(
                    RegExp(r'^[A-Z][a-zA-Z0-9]*$'))
              ],
            ),
            SizedBox(height: 20), // Espaciado entre los campos de texto
            // Segundo campo de texto para la contrase帽a
            TextField(
              controller: _passwordController, // Asignaci贸n del controlador
              obscureText: true, // Oculta el texto ingresado
              decoration: InputDecoration(
                labelText: 'Contrase帽a', // Etiqueta del campo
                hintText: 'Ej: 12345A', // Texto de sugerencia
                border: OutlineInputBorder(), // Borde del campo
              ),
              keyboardType: TextInputType.number, // Tipo de teclado num茅rico
            ),
            SizedBox(height: 20), // Espaciado entre el campo de texto y el bot贸n
            // Bot贸n "INICIAR"
            ElevatedButton(
              onPressed: () {
                // Obtiene los valores ingresados en los campos de texto
                String username = _usernameController.text;
                String password = _passwordController.text;

                // Validaci贸n del usuario
                if (!RegExp(r'^[A-Z][a-z]*[0-9]$').hasMatch(username)) {
                  // Muestra un mensaje de error si la validaci贸n falla
                  ScaffoldMessenger.of(context).showSnackBar(
                    SnackBar(
                        content:
                            Text('Usuario incorrecto. Verifica tu usuario.')),
                  );
                  return; // Detiene la ejecuci贸n si la validaci贸n falla
                }

                // Validaci贸n de la contrase帽a
                if (!RegExp(r'^\d{5}[A-Z]$').hasMatch(password)) {
                  // Muestra un mensaje de error si la validaci贸n falla
                  ScaffoldMessenger.of(context).showSnackBar(
                    SnackBar(content: Text('Contrase帽a incorrecta.')),
                  );
                  return; // Detiene la ejecuci贸n si la validaci贸n falla
                }

                // Si ambas validaciones son correctas, navega a la pantalla WelcomeScreen
                Navigator.push(
                  context,
                  MaterialPageRoute(
                      builder: (context) => WelcomeScreen(registeredUser: ' ')),
                );
              },
              child: Text('INICIAR'), // Texto del bot贸n
            ),
          ],
        ),
      ),
    );
  }
}

// Definici贸n de la clase SupermarketMapScreen que extiende StatefulWidget
class SupermarketMapScreen extends StatefulWidget {
  final String supermarketName; // Nombre del supermercado
  final double latitude; // Latitud de la ubicaci贸n
  final double longitude; // Longitud de la ubicaci贸n

  // Constructor que requiere los par谩metros mencionados
  SupermarketMapScreen({
    required this.supermarketName,
    required this.latitude,
    required this.longitude,
  });

  @override
  _SupermarketMapScreenState createState() => _SupermarketMapScreenState();
}
// Definici贸n de la clase _SupermarketMapScreenState que extiende State<SupermarketMapScreen>
class _SupermarketMapScreenState extends State<SupermarketMapScreen> {
  // Controlador para el mapa de Google
  late GoogleMapController mapController;

  // Funci贸n que se llama cuando el mapa es creado
  void _onMapCreated(GoogleMapController controller) {
    mapController = controller; // Asigna el controlador del mapa
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de aplicaci贸n con t铆tulo din谩mico que muestra el nombre del supermercado
      appBar: AppBar(
        title: Text('Ubicaci贸n: ${widget.supermarketName}'),
        backgroundColor: Color(0xFF008080), // Color de fondo de la AppBar
      ),
      // Cuerpo de la pantalla con el widget GoogleMap
      body: GoogleMap(
        onMapCreated: _onMapCreated, // Asigna la funci贸n que se llama al crear el mapa
        initialCameraPosition: CameraPosition(
          target: LatLng(widget.latitude, widget.longitude), // Establece la posici贸n inicial del mapa
          zoom: 14.0, // Nivel de zoom inicial
        ),
        markers: {
          // Marcador que indica la ubicaci贸n del supermercado
          Marker(
            markerId: MarkerId('supermarket_marker'),
            position: LatLng(widget.latitude, widget.longitude),
            infoWindow: InfoWindow(
              title: widget.supermarketName, // T铆tulo del marcador
              snippet: 'Ubicaci贸n de ${widget.supermarketName}', // Descripci贸n del marcador
            ),
          ),
        },
      ),
    );
  }
}

// Definici贸n de la clase WelcomeScreen que extiende StatelessWidget
class WelcomeScreen extends StatelessWidget {
  final String registeredUser; // Nombre del usuario registrado

  // Constructor que requiere el nombre del usuario registrado
  WelcomeScreen({required this.registeredUser});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Color(0xFF90EE90), // Color de fondo de la pantalla
      appBar: AppBar(
        title: Text('Bienvenido'),
        backgroundColor: Color(0xFF008080), // Color de fondo de la AppBar
      ),
      // Cuerpo de la pantalla con desplazamiento vertical
      body: SingleChildScrollView(
        child: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center, // Centra el contenido verticalmente
            children: [
              // Contenedor que muestra un saludo con una carita feliz
              Container(
                margin: EdgeInsets.only(top: 40), // Margen superior
                padding: EdgeInsets.symmetric(vertical: 16, horizontal: 24), // Relleno interno
                decoration: BoxDecoration(
                  color: Color(0xFF008080), // Color de fondo del contenedor
                  borderRadius: BorderRadius.circular(8), // Bordes redondeados
                ),
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.center, // Centra el contenido horizontalmente
                  children: [
                    Text(
                      'Hola!',
                      style: TextStyle(
                        color: Color(0xFFFFD700), // Color dorado del texto
                        fontSize: 24,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    SizedBox(width: 8), // Espacio entre el texto y la carita feliz
                    Text(
                      '', // Carita feliz
                      style: TextStyle(
                        fontSize: 24,
                      ),
                    ),
                  ],
                ),
              ),
              SizedBox(height: 20), // Espacio entre el saludo y el siguiente texto
              Text(
                '驴Te gustar铆a hacer una lista de compras?',
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                textAlign: TextAlign.center, // Centra el texto
              ),
              SizedBox(height: 10), // Espacio entre el texto y el bot贸n
              ElevatedButton(
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.white, // Color de fondo del bot贸n
                  foregroundColor: Colors.black, // Color del texto del bot贸n
                ),
                onPressed: () {
                  // Navega a la pantalla de lista de compras
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (context) => ShoppingListScreen(),
                    ),
                  );
                },
                child: Text('Presiona Aqu铆'),
              ),
              SizedBox(height: 20), // Espacio entre el bot贸n y el siguiente texto
              Text(
                'Elige tu supermercado favorito:',
                style: TextStyle(fontSize: 18),
                textAlign: TextAlign.center, // Centra el texto
              ),
              SizedBox(height: 20), // Espacio entre el texto y los botones de selecci贸n de supermercado

              // Secci贸n para seleccionar el supermercado "Merco"
              SupermarketSection(
                label: 'Merco',
                cost: 'Costo de canasta b谩sica: \$1200.00 MXN',
                latitude: 29.33125378974445,
                longitude: -100.97978453125438,
                onPressed: () {
                  // Navega a la pantalla del supermercado "Merco"
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (context) =>
                          SupermarketScreen(supermarketName: 'Merco'),
                    ),
                  );
                },
              ),
              SizedBox(height: 10), // Espacio entre las secciones de supermercados
              // Secci贸n para seleccionar el supermercado "Soriana"
              SupermarketSection(
                label: 'Soriana',
                cost: 'Costo de canasta b谩sica: \$1500.00 MXN',
                latitude: 29.323877848488756,
                longitude: -100.95773389430599,
                onPressed: () {
                  // Navega a la pantalla del supermercado "Soriana"
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (context) =>
                          SupermarketScreen(supermarketName: 'Soriana'),
                    ),
                  );
                },
              ),
              SizedBox(height: 10), // Espacio entre las secciones de supermercados
              // Secci贸n para seleccionar el supermercado "Gutierrez"
              SupermarketSection(
                label: 'Gutierrez',
                cost: 'Costo de canasta b谩sica: \$1450.00 MXN',
                latitude: 29.300961536803708,
                longitude: -100.96173333357605,
                onPressed: () {
                  // Navega a la pantalla del supermercado "Gutierrez"
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (context) =>
                          SupermarketScreen(supermarketName: 'Gutierrez'),
                    ),
                  );
                },
              ),
              SizedBox(height: 10), // Espacio entre las secciones de supermercados
              // Secci贸n para seleccionar el supermercado "Walmart"
              SupermarketSection(
                label: 'Walmart',
                cost: 'Costo de canasta b谩sica: \$1850.00 MXN',
                latitude: 29.320021377
onPressed: () {
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (context) =>
                          SupermarketScreen(supermarketName: 'Walmart'),
                    ),
                  );
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}

// Definici贸n de la clase SupermarketSection que extiende StatelessWidget
class SupermarketSection extends StatelessWidget {
  final String label; // Nombre del supermercado
  final String cost; // Costo de la canasta b谩sica en el supermercado
  final double latitude; // Latitud de la ubicaci贸n del supermercado
  final double longitude; // Longitud de la ubicaci贸n del supermercado
  final VoidCallback onPressed; // Funci贸n a ejecutar al presionar el bot贸n

  // Constructor que inicializa los valores de la clase
  const SupermarketSection({
    required this.label, // Inicializa el nombre del supermercado
    required this.cost, // Inicializa el costo de la canasta b谩sica
    required this.latitude, // Inicializa la latitud
    required this.longitude, // Inicializa la longitud
    required this.onPressed, // Inicializa la funci贸n que se ejecutar谩 al presionar el bot贸n
    Key? key, // Recibe una clave opcional para la identificaci贸n del widget
  }) : super(key: key); // Llama al constructor de la clase base (StatelessWidget)

  @override
  Widget build(BuildContext context) {
    return Container(
      // Define m谩rgenes horizontales y verticales para el contenedor
      margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
      // A帽ade relleno interno al contenedor
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        color: Colors.white, // Establece el color de fondo del contenedor
        borderRadius: BorderRadius.circular(8), // Redondea las esquinas del contenedor
        boxShadow: [
          // A帽ade una sombra al contenedor para darle un efecto 3D
          BoxShadow(
            color: Colors.grey.withOpacity(0.5), // Sombra gris con opacidad
            blurRadius: 6, // Radio de difusi贸n de la sombra
            offset: Offset(0, 3), // Desplazamiento de la sombra en el eje X y Y
          ),
        ],
      ),
      child: Column(
        children: [
          // Muestra el nombre del supermercado como un t铆tulo
          Text(
            label,
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 8), // A帽ade un espacio entre el nombre y el costo
          // Muestra el costo de la canasta b谩sica
          Text(cost),
          const SizedBox(height: 8), // A帽ade un espacio entre el costo y los botones
          Row(
            mainAxisAlignment: MainAxisAlignment.center, // Centra los elementos dentro de la fila
            children: [
              // Bot贸n para ver la canasta b谩sica del supermercado
              ElevatedButton(
                style: ElevatedButton.styleFrom(
                  backgroundColor: Colors.teal, // Color de fondo del bot贸n
                  foregroundColor: Colors.white, // Color del texto del bot贸n
                ),
                onPressed: onPressed, // Asigna la funci贸n al presionar el bot贸n
                child: Text('Ver Canasta B谩sica'), // Texto que aparece en el bot贸n
              ),
              const SizedBox(width: 16), // Espacio entre el bot贸n y el siguiente 铆cono
              // cono que abre la ubicaci贸n en el mapa
              IconButton(
                icon: Icon(Icons.location_on, color: Colors.red, size: 30), // cono de ubicaci贸n
                onPressed: () {
                  // Navega a la pantalla de mapa mostrando la ubicaci贸n del supermercado
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (context) => MapScreen(
                        supermarketName: label, // Pasa el nombre del supermercado
                        latitude: latitude, // Pasa la latitud
                        longitude: longitude, // Pasa la longitud
                      ),
                    ),
                  );
                },
              ),
            ],
          ),
        ],
      ),
    );
  }
}
// Definici贸n de la clase MapScreen que extiende StatelessWidget
class MapScreen extends StatelessWidget {
  final String supermarketName; // Nombre del supermercado
  final double latitude; // Latitud de la ubicaci贸n del supermercado
  final double longitude; // Longitud de la ubicaci贸n del supermercado

  // Constructor que recibe los valores necesarios (nombre, latitud y longitud)
  const MapScreen({
    required this.supermarketName, // Inicializa el nombre del supermercado
    required this.latitude, // Inicializa la latitud
    required this.longitude, // Inicializa la longitud
    Key? key, // Clave opcional para el widget
  }) : super(key: key); // Llama al constructor de la clase base (StatelessWidget)

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n que muestra el nombre del supermercado
      appBar: AppBar(
        title: Text(supermarketName), // T铆tulo de la barra de la app con el nombre del supermercado
        backgroundColor: Color(0xFF008080), // Color de fondo de la barra de la app (teal)
      ),
      body: GoogleMap(
        // Configura la vista inicial del mapa con la latitud y longitud del supermercado
        initialCameraPosition: CameraPosition(
          target: LatLng(latitude, longitude), // Posici贸n en el mapa
          zoom: 15, // Nivel de zoom inicial del mapa
        ),
        // A帽ade un marcador en la ubicaci贸n del supermercado
        markers: {
          Marker(
            markerId: MarkerId(supermarketName), // ID 煤nico para el marcador
            position: LatLng(latitude, longitude), // Posici贸n del marcador
            infoWindow: InfoWindow(title: supermarketName), // Ventana de informaci贸n con el nombre del supermercado
          ),
        },
      ),
    );
  }
}

// Pantalla que muestra una lista de los productos m谩s vendidos (Top 10 productos)
class TopProductsScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con el t铆tulo 'Top 10 Productos'
      appBar: AppBar(
        title: Text('Top 10 Productos'), // T铆tulo en la barra de la app
        backgroundColor: Color(0xFF008080), // Color de fondo de la barra (teal)
      ),
      body: ListView(
        padding: EdgeInsets.all(16), // Espaciado alrededor de la lista
        children: List.generate(10, (index) {
          // Genera una lista de productos numerados del 1 al 10
          return ListTile(
            // Icono circular con el n煤mero del producto
            leading: CircleAvatar(
              backgroundColor: Colors.teal, // Color de fondo del c铆rculo
              child: Text(
                '${index + 1}', // N煤mero de producto
                style: TextStyle(color: Colors.white, fontWeight: FontWeight.bold),
              ),
            ),
            title: Text('Producto ${index + 1}'), // T铆tulo del producto
            subtitle: Text('Descripci贸n del producto ${index + 1}'), // Descripci贸n del producto
          );
        }),
      ),
    );
  }
}

// Bot贸n reutilizable para mostrar supermercados en la aplicaci贸n
class SupermarketButton extends StatelessWidget {
  final String label; // Etiqueta del bot贸n
  final VoidCallback onPressed; // Funci贸n a ejecutar cuando se presiona el bot贸n

  // Constructor para inicializar la etiqueta y la acci贸n a ejecutar al presionar el bot贸n
  SupermarketButton({required this.label, required this.onPressed});

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      style: ElevatedButton.styleFrom(
        backgroundColor: Color(0xFF008080), // Color de fondo del bot贸n (teal)
        foregroundColor: Color(0xFFFFD700), // Color del texto del bot贸n (gold)
        padding: EdgeInsets.symmetric(vertical: 12, horizontal: 20), // Relleno del bot贸n
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.circular(8), // Bordes redondeados del bot贸n
        ),
      ),
      onPressed: onPressed, // Asigna la funci贸n que se ejecutar谩 al presionar el bot贸n
      child: Text(
        label, // Etiqueta que se muestra en el bot贸n
        style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold), // Estilo del texto en el bot贸n
      ),
    );
  }
}

// Clase que representa la pantalla de un supermercado espec铆fico
class SupermarketScreen extends StatelessWidget {
  final String supermarketName; // Almacena el nombre del supermercado

  // Constructor que requiere el nombre del supermercado
  SupermarketScreen({required this.supermarketName});

  // Funci贸n para obtener la ruta del logo del supermercado seg煤n su nombre
  String getLogoPath() {
    switch (supermarketName) { // Compara el nombre del supermercado
      case 'Merco': 
        return 'assets/Mer1.png'; // Ruta para el logo de Merco
      case 'Soriana':
        return 'assets/sori2.png'; // Ruta para el logo de Soriana
      case 'Gutierrez':
        return 'assets/Gu3.png'; // Ruta para el logo de Gutierrez
      case 'Walmart':
        return 'assets/wal4.png'; // Ruta para el logo de Walmart
      default:
        return 'assets/de'; // Ruta por defecto en caso de que no coincida con ning煤n supermercado
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold( // Crea la estructura b谩sica de la pantalla con barra de app y cuerpo
      appBar: AppBar( // Barra superior con t铆tulo
        title: Text('Supermercado'), // T铆tulo de la pantalla
        backgroundColor: Color(0xFF008080), // Color de fondo de la barra
      ),
      body: Center( // Centra los elementos dentro del cuerpo de la pantalla
        child: Column( // Usa una columna para organizar los elementos verticalmente
          mainAxisAlignment: MainAxisAlignment.center, // Alineaci贸n central de los elementos
          children: [
            // Muestra el logo basado en el supermercado seleccionado
            Image.asset(
              getLogoPath(), // Llama a la funci贸n para obtener el logo del supermercado
              height: 100, // Ajusta el tama帽o de la imagen en altura
              width: 100, // Ajusta el tama帽o de la imagen en ancho
            ),
            SizedBox(height: 20), // Espacio entre el logo y el texto
            Text(
              'Bienvenido a $supermarketName', // Muestra un mensaje de bienvenida con el nombre del supermercado
              style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold), // Estilo del texto
            ),
            SizedBox(height: 20), // Espacio entre el texto y el bot贸n
            ElevatedButton( // Crea un bot贸n que llevar谩 a la pantalla de la canasta b谩sica
              onPressed: () {
                Navigator.push( // Acci贸n de navegaci贸n al presionar el bot贸n
                  context,
                  MaterialPageRoute(
                      builder: (context) => CanastaBasicaScreen()), // Ruta hacia la pantalla 'CanastaBasicaScreen'
                );
              },
              child: Text('Ver la canasta basica aqui:'), // Texto que aparece en el bot贸n
            ),
          ],
        ),
      ),
    );
  }
}

// Clase que representa la pantalla con la lista de productos de la canasta b谩sica
class CanastaBasicaScreen extends StatelessWidget {
  // Mapa que contiene las categor铆as de productos y sus elementos (cada categor铆a tiene una lista de productos)
  final Map<String, List<Map<String, String>>> categories = {
    'Alimentos': [ // Productos de la categor铆a "Alimentos"
      {'image': 'aceite.png', 'name': 'Aceite'},
      {'image': 'agua.png', 'name': 'Agua'},
      {'image': 'ajo.png', 'name': 'Ajo'},
      {'image': 'arroz.png', 'name': 'Arroz'},
      {'image': 'atun.png', 'name': 'At煤n'},
      {'image': 'avena.png', 'name': 'Avena'},
      {'image': 'azucar.png', 'name': 'Az煤car'},
      {'image': 'brocoli.png', 'name': 'Br贸coli'},
      {'image': 'cafe.png', 'name': 'Caf茅'},
      {'image': 'camote.png', 'name': 'Camote'},
      {'image': 'carne_de_res.png', 'name': 'Carne de Res'},
      {'image': 'cebolla.png', 'name': 'Cebolla'},
      {'image': 'chile.png', 'name': 'Chile'},
      {'image': 'espinaca.png', 'name': 'Espinaca'},
      {'image': 'frijoles.png', 'name': 'Frijoles'},
      {'image': 'huevo.png', 'name': 'Huevo'},
      {'image': 'leche.png', 'name': 'Leche'},
      {'image': 'lentejas.png', 'name': 'Lentejas'},
      {'image': 'limon.png', 'name': 'Lim贸n'},
      {'image': 'mantequilla.png', 'name': 'Mantequilla'},
      {'image': 'manzanas.png', 'name': 'Manzanas'},
      {'image': 'naranjas.png', 'name': 'Naranjas'},
      {'image': 'papa.png', 'name': 'Papa'},
      {'image': 'pescado.png', 'name': 'Pescado'},
      {'image': 'platano.png', 'name': 'Pl谩tano'},
      {'image': 'pollo.png', 'name': 'Pollo'},
      {'image': 'sal.png', 'name': 'Sal'},
    ],
    'Limpieza': [ // Productos de la categor铆a "Limpieza"
      {'image': 'cloro.png', 'name': 'Cloro'},
      {'image': 'detergente.png', 'name': 'Detergente'},
      {'image': 'jabonb.png', 'name': 'Jab贸n Barra'},
      {'image': 'jabonp.png', 'name': 'Jab贸n Polvo'},
    ],
    'Higiene': [ // Productos de la categor铆a "Higiene"
      {'image': 'cepillod.png', 'name': 'Cepillo Dental'},
      {'image': 'papelh.png', 'name': 'Papel Higi茅nico'},
      {'image': 'pastad.png', 'name': 'Pasta Dental'},
    ],
    'Otros': [ // Productos de la categor铆a "Otros"
      {'image': 'cerillos.png', 'name': 'Cerillos'},
      {'image': 'jugon.png', 'name': 'Jugos'},
      {'image': 'hm.png', 'name': 'Harina de Ma铆z'},
      {'image': 'ht.png', 'name': 'Harina de Trigo'},
    ],
  };
}
@override
Widget build(BuildContext context) {
  return Scaffold(  // Estructura principal de la pantalla, que incluye barra superior y cuerpo
    appBar: AppBar(  // Barra superior de la pantalla
      title: Text('Canasta B谩sica'),  // T铆tulo que aparece en la barra superior
      backgroundColor: Colors.blueAccent,  // Color de fondo de la barra superior
    ),
    body: ListView(  // Crea una lista desplazable que contendr谩 las categor铆as y productos
      children: categories.entries.map((entry) {  // Itera sobre las categor铆as de productos
        return Column(  // Agrupa los widgets de cada categor铆a
          crossAxisAlignment: CrossAxisAlignment.start,  // Alineaci贸n de los elementos a la izquierda
          children: [
            Padding(  // Agrega espacio alrededor del texto de la categor铆a
              padding: const EdgeInsets.all(8.0),  // Espacio de padding
              child: Text(
                entry.key,  // Nombre de la categor铆a
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),  // Estilo de texto para la categor铆a
              ),
            ),
            GridView.builder(  // Crea una rejilla para mostrar los productos de la categor铆a
              shrinkWrap: true,  // Hace que la vista en rejilla se ajuste al tama帽o de los elementos
              physics: NeverScrollableScrollPhysics(),  // Deshabilita el desplazamiento de la rejilla
              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(  // Configura la distribuci贸n en la rejilla
                crossAxisCount: 3,  // N煤mero de columnas en la rejilla
                crossAxisSpacing: 8.0,  // Espacio entre las columnas
                mainAxisSpacing: 8.0,  // Espacio entre las filas
              ),
              itemCount: entry.value.length,  // N煤mero de productos en la categor铆a
              itemBuilder: (context, index) {  // Construye cada celda de la rejilla
                final item = entry.value[index];  // Obtiene el producto de la categor铆a
                return Column(  // Agrupa la imagen y el nombre del producto
                  children: [
                    Expanded(  // Hace que la imagen ocupe todo el espacio disponible
                      child: Image.asset(
                        'assets/${item['image']}',  // Ruta de la imagen del producto
                        fit: BoxFit.cover,  // Ajuste de la imagen para cubrir el espacio
                      ),
                    ),
                    SizedBox(height: 4.0),  // Espacio entre la imagen y el nombre del producto
                    Text(
                      item['name']!,  // Muestra el nombre del producto
                      textAlign: TextAlign.center,  // Alinea el texto al centro
                      style: TextStyle(fontSize: 14),  // Estilo de texto para el nombre del producto
                    ),
                  ],
                );
              },
            ),
          ],
        );
      }).toList(),  // Convierte las entradas de categor铆a en una lista de widgets
    ),
  );
}

class SupermercadoPage extends StatelessWidget {
  final String name;  // Nombre del supermercado
  final Color color;  // Color personalizado para la barra superior
  final String info;  // Informaci贸n adicional sobre el supermercado

  SupermercadoPage(
      {required this.name, required this.color, required this.info});  // Constructor que recibe los par谩metros

  @override
  Widget build(BuildContext context) {
    return Scaffold(  // Estructura principal de la pantalla, con barra superior y cuerpo
      appBar: AppBar(
        title: Text('Bienvenido a $name'),  // T铆tulo din谩mico con el nombre del supermercado
        backgroundColor: color,  // Usa el color personalizado para la barra superior
      ),
      body: Center(  // Centra el contenido dentro de la pantalla
        child: Column(  // Organiza los elementos de manera vertical
          mainAxisAlignment: MainAxisAlignment.center,  // Centra los elementos verticalmente
          children: [
            Text(
              'Precio de la canasta b谩sica en $name:',  // Muestra el nombre del supermercado
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),  // Estilo de texto para el t铆tulo
            ),
            SizedBox(height: 20),  // Espacio entre el t铆tulo y el bot贸n
            ElevatedButton(  // Bot贸n para mostrar el precio de la canasta b谩sica
              onPressed: () {
                showDialog(  // Muestra un cuadro de di谩logo con el precio
                  context: context,
                  builder: (context) {
                    return AlertDialog(
                      title: Text('Precio de la Canasta B谩sica'),  // T铆tulo del cuadro de di谩logo
                      content: Text(''),  // Contenido vac铆o (aqu铆 se puede mostrar el precio din谩micamente)
                      actions: [
                        TextButton(
                          onPressed: () {
                            Navigator.of(context).pop();  // Cierra el cuadro de di谩logo
                          },
                          child: Text('Cerrar'),  // Bot贸n para cerrar el cuadro de di谩logo
                        ),
                      ],
                    );
                  },
                );
              },
              child: Text('Mostrar precio'),  // Texto que aparece en el bot贸n
            ),
            SizedBox(height: 20),  // Espacio entre el bot贸n y el siguiente texto
            Text(
              info,  // Muestra la informaci贸n adicional del supermercado
              style: TextStyle(fontSize: 16),  // Estilo de texto para la informaci贸n adicional
            ),
            ElevatedButton(  // Bot贸n para volver a la pantalla anterior
              onPressed: () {
                Navigator.pop(context);  // Acci贸n para regresar a la pantalla anterior
              },
              child: Text('Volver'),  // Texto que aparece en el bot贸n
            ),
          ],
        ),
      ),
    );
  }
}
//----------------------------------------------------
// Pantallas de navegaci贸n ejemplo

// Clase que representa la pantalla de la lista de compras
class ShoppingListScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con t铆tulo centrado y color de fondo teal
      appBar: AppBar(
        title: Center(child: Text('Lista de Compras')), // T铆tulo centrado
        backgroundColor: Colors.teal,
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0), // Espaciado alrededor del contenido
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.center, // Centra los elementos en el eje horizontal
          children: [
            SizedBox(height: 16), // Espacio inicial
            // Contenedor con mensaje de bienvenida
            Container(
              padding: const EdgeInsets.all(16.0), // Espaciado interno
              decoration: BoxDecoration(
                color: Colors.teal, // Color de fondo del contenedor
                borderRadius: BorderRadius.circular(8.0), // Bordes redondeados
              ),
              child: Text(
                'Hola, espero que tengas un buen d铆a',
                style: TextStyle(color: Color(0xFFFFD700), fontSize: 18), // Estilo del texto
                textAlign: TextAlign.center, // Centra el texto
              ),
            ),
            SizedBox(height: 24), // Espacio entre elementos
            // Etiqueta explicativa
            Text(
              'En el recuadro de abajo pon los art铆culos que sueles comprar cada semana.',
              style: TextStyle(fontSize: 16), // Estilo del texto
              textAlign: TextAlign.center, // Centra el texto
            ),
            SizedBox(height: 24),
            // Contenedor que simula una hoja de cuaderno para ingresar art铆culos
            Expanded(
              child: Container(
                decoration: BoxDecoration(
                  border: Border.all(color: Colors.grey), // Borde gris
                  borderRadius: BorderRadius.circular(8.0), // Bordes redondeados
                ),
                padding: const EdgeInsets.symmetric(vertical: 8.0), // Espaciado vertical
                child: ListView.builder(
                  itemCount: 20, // N煤mero de l铆neas para ingresar art铆culos
                  itemBuilder: (context, index) {
                    return ListTile(
                      leading: Text(
                        '${index + 1}.', // N煤mero de la l铆nea
                        style: TextStyle(fontSize: 16), // Estilo del texto
                      ),
                      title: TextField(
                        decoration: InputDecoration(
                          hintText: 'Escribe aqu铆...', // Texto de sugerencia
                          border: InputBorder.none, // Sin borde
                        ),
                      ),
                    );
                  },
                ),
              ),
            ),
            SizedBox(height: 16),
            // Bot贸n para guardar la lista
            ElevatedButton(
              style: ElevatedButton.styleFrom(
                backgroundColor: Colors.teal, // Color de fondo del bot贸n
              ),
              onPressed: () {
                // Mostrar ventana emergente al presionar el bot贸n
                showDialog(
                  context: context,
                  builder: (BuildContext context) {
                    return AlertDialog(
                      title: Text('Lista Guardada'),
                      content: Text(
                        'Tu lista ha sido guardada con la intenci贸n de encuestar los art铆culos m谩s comprados.',
                      ),
                      actions: [
                        TextButton(
                          child: Text('Salir'),
                          onPressed: () {
                            Navigator.pop(context); // Cierra la ventana emergente
                            Navigator.pop(context); // Regresa a la pantalla anterior
                          },
                        ),
                      ],
                    );
                  },
                );
              },
              child: Text('Guardar'), // Texto del bot贸n
            ),
          ],
        ),
      ),
    );
  }
}

// Clase que representa la pantalla con los productos m谩s vendidos
class BestSellingProductsScreen extends StatelessWidget {
  // Lista de los 10 productos m谩s vendidos con sus im谩genes y nombres
  final List<Map<String, String>> top10Products = [
    {'image': 'assets/aceite.png', 'name': 'Aceite'},
    {'image': 'assets/arroz.png', 'name': 'Arroz'},
    {'image': 'assets/atun.png', 'name': 'At煤n'},
    {'image': 'assets/avena.png', 'name': 'Avena'},
    {'image': 'assets/azucar.png', 'name': 'Az煤car'},
    {'image': 'assets/frijoles.png', 'name': 'Frijoles'},
    {'image': 'assets/huevo.png', 'name': 'Huevo'},
    {'image': 'assets/leche.png', 'name': 'Leche'},
    {'image': 'assets/detergente.png', 'name': 'Detergente'},
    {'image': 'assets/cepillod.png', 'name': 'Cepillo Dental'},
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con t铆tulo y color de fondo teal
      appBar: AppBar(
        title: Text('Top 10 Productos M谩s Vendidos'),
        backgroundColor: Color(0xFF008080),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0), // Espaciado alrededor del contenido
        child: ListView.builder(
          itemCount: top10Products.length, // N煤mero de productos en la lista
          itemBuilder: (context, index) {
            return Card(
              margin: EdgeInsets.symmetric(vertical: 10), // Espaciado vertical entre tarjetas
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(10), // Bordes redondeados
              ),
              elevation: 5, // Sombra de la tarjeta
              child: ListTile(
                leading: Image.asset(
                  top10Products[index]['image']!, // Imagen del producto
                  width: 50, // Ancho de la imagen
                  height: 50, // Alto de la imagen
                  fit: BoxFit.cover, // Ajuste de la imagen
                ),
                title: Text(
                  top10Products[index]['name']!, // Nombre del producto
                  style: TextStyle(
                    fontSize: 18, // Tama帽o de la fuente
                    fontWeight: FontWeight.bold, // Negrita
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}
class BudgetScreen extends StatelessWidget {
  // Controlador para el campo de texto donde el usuario ingresar谩 el monto
  final TextEditingController _controller = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con t铆tulo y color de fondo azul
      appBar: AppBar(
        title: Text("Calculadora de presupuesto"),
        backgroundColor: Colors.blue,
      ),
      body: Center(
        child: Padding(
          padding: const EdgeInsets.all(16.0), // Espaciado alrededor del contenido
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center, // Centra los elementos en el eje vertical
            children: [
              // T铆tulo que solicita al usuario ingresar su presupuesto familiar
              Text(
                '驴Cu谩l es tu presupuesto familiar?',
                style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
              ),
              SizedBox(height: 20), // Espacio entre elementos
              // Subt铆tulo que indica al usuario que ingrese el monto utilizado para el presupuesto
              Text(
                'Ingresa el monto utilizado para hacer tu presupuesto:',
                style: TextStyle(fontSize: 16),
              ),
              SizedBox(height: 10), // Espacio entre elementos
              // Campo de texto para que el usuario ingrese el monto
              TextField(
                controller: _controller, // Asocia el controlador al campo de texto
                keyboardType: TextInputType.number, // Configura el teclado para ingresar n煤meros
                decoration: InputDecoration(
                  border: OutlineInputBorder(), // Borde alrededor del campo de texto
                  hintText: 'Ingresa un monto', // Texto de sugerencia
                ),
              ),
              SizedBox(height: 20), // Espacio entre elementos
              // Texto que indica al usuario que, basado en su presupuesto, se le sugerir谩n opciones de compra
              Text(
                'En base a tu presupuesto te decimos d贸nde puedes comprar tu despensa.',
                textAlign: TextAlign.center,
                style: TextStyle(fontSize: 16),
              ),
              SizedBox(height: 20), // Espacio entre elementos
              // Bot贸n que al presionarlo calcula las opciones de mercado basadas en el presupuesto ingresado
              ElevatedButton(
                onPressed: () {
                  // Intenta convertir el texto ingresado a un n煤mero entero
                  final input = int.tryParse(_controller.text);
                  // Verifica que el monto ingresado sea v谩lido y tenga al menos 3 d铆gitos
                  if (input != null && input >= 100) {
                    // Define los costos de la canasta b谩sica en diferentes supermercados
                    final supermarkets = {
                      'Merco': 1200,
                      'Soriana': 1500,
                      'Gutierrez': 1450,
                      'Walmart': 1850,
                    };

                    // Listas para almacenar los supermercados que est谩n dentro y fuera del presupuesto
                    List<String> nearby = [];
                    List<String> farAway = [];

                    // Clasifica los supermercados seg煤n el presupuesto ingresado
                    supermarkets.forEach((supermarket, cost) {
                      // Si el presupuesto est谩 dentro de un rango de 卤200 del costo del supermercado, se considera cercano
                      if (input >= cost - 200 && input <= cost + 200) {
                        nearby.add(supermarket);
                      } else {
                        farAway.add(supermarket);
                      }
                    });

                    // Muestra un cuadro de di谩logo con las opciones de mercado
                    showDialog(
                      context: context,
                      builder: (context) => AlertDialog(
                        title: Text('Opciones de mercado'),
                        content: Column(
                          mainAxisSize: MainAxisSize.min,
                          children: [
                            // Si hay supermercados dentro del presupuesto, muestra la lista
                            if (nearby.isNotEmpty)
                              Text(
                                  'Tu presupuesto me dice que puedes comprar en:'),
                            ...nearby.map((supermarket) => Text(supermarket)),
                            // Si hay supermercados fuera del presupuesto, muestra la lista
                            if (nearby.isNotEmpty && farAway.isNotEmpty)
                              SizedBox(height: 20),
                            if (farAway.isNotEmpty)
                              Text(
                                  'Tu presupuesto no alcanza para comprar aqu铆'),
                            ...farAway.map((supermarket) => Text(supermarket)),
                          ],
                        ),
                        actions: [
                          // Bot贸n para cerrar el cuadro de di谩logo
                          IconButton(
                            icon: Icon(Icons.close),
                            onPressed: () {
                              Navigator.pop(context); // Cierra el cuadro de di谩logo
                            },
                          ),
                        ],
                      ),
                    );
                  } else {
                    // Si el monto ingresado no es v谩lido, muestra un mensaje de error
                    ScaffoldMessenger.of(context).showSnackBar(SnackBar(
                      content: Text(
                          'Por favor, ingresa un monto v谩lido de al menos 3 cifras.'),
                    ));
                  }
                },
                child: Text('Calcular'), // Texto del bot贸n
              ),
            ],
          ),
        ),
      ),
    );
  }
}
class BudgetScreen extends StatelessWidget {
  // Controlador para el campo de texto donde el usuario ingresar谩 el monto
  final TextEditingController _controller = TextEditingController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con t铆tulo y color de fondo azul
      appBar: AppBar(
        title: Text("Calculadora de presupuesto"),
        backgroundColor: Colors.blue,
      ),
      body: Center(
        child: Padding(
          padding: const EdgeInsets.all(16.0), // Espaciado alrededor del contenido
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center, // Centra los elementos en el eje vertical
            children: [
              // T铆tulo que solicita al usuario ingresar su presupuesto familiar
              Text(
                '驴Cu谩l es tu presupuesto familiar?',
                style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
              ),
              SizedBox(height: 20), // Espacio entre elementos
              // Subt铆tulo que indica al usuario que ingrese el monto utilizado para el presupuesto
              Text(
                'Ingresa el monto utilizado para hacer tu presupuesto:',
                style: TextStyle(fontSize: 16),
              ),
              SizedBox(height: 10), // Espacio entre elementos
              // Campo de texto para que el usuario ingrese el monto
              TextField(
                controller: _controller, // Asocia el controlador al campo de texto
                keyboardType: TextInputType.number, // Configura el teclado para ingresar n煤meros
                decoration: InputDecoration(
                  border: OutlineInputBorder(), // Borde alrededor del campo de texto
                  hintText: 'Ingresa un monto', // Texto de sugerencia
                ),
              ),
              SizedBox(height: 20), // Espacio entre elementos
              // Texto que indica al usuario que, basado en su presupuesto, se le sugerir谩n opciones de compra
              Text(
                'En base a tu presupuesto te decimos d贸nde puedes comprar tu despensa.',
                textAlign: TextAlign.center,
                style: TextStyle(fontSize: 16),
              ),
              SizedBox(height: 20), // Espacio entre elementos
              // Bot贸n que al presionarlo calcula las opciones de mercado basadas en el presupuesto ingresado
              ElevatedButton(
                onPressed: () {
                  // Intenta convertir el texto ingresado a un n煤mero entero
                  final input = int.tryParse(_controller.text);
                  // Verifica que el monto ingresado sea v谩lido y tenga al menos 3 d铆gitos
                  if (input != null && input >= 100) {
                    // Define los costos de la canasta b谩sica en diferentes supermercados
                    final supermarkets = {
                      'Merco': 1200,
                      'Soriana': 1500,
                      'Gutierrez': 1450,
                      'Walmart': 1850,
                    };

                    // Listas para almacenar los supermercados que est谩n dentro y fuera del presupuesto
                    List<String> nearby = [];
                    List<String> farAway = [];

                    // Clasifica los supermercados seg煤n el presupuesto ingresado
                    supermarkets.forEach((supermarket, cost) {
                      // Si el presupuesto est谩 dentro de un rango de 卤200 del costo del supermercado, se considera cercano
                      if (input >= cost - 200 && input <= cost + 200) {
                        nearby.add(supermarket);
                      } else {
                        farAway.add(supermarket);
                      }
                    });

                    // Muestra un cuadro de di谩logo con las opciones de mercado
                    showDialog(
                      context: context,
                      builder: (context) => AlertDialog(
                        title: Text('Opciones de mercado'),
                        content: Column(
                          mainAxisSize: MainAxisSize.min,
                          children: [
                            // Si hay supermercados dentro del presupuesto, muestra la lista
                            if (nearby.isNotEmpty)
                              Text(
                                  'Tu presupuesto me dice que puedes comprar en:'),
                            ...nearby.map((supermarket) => Text(supermarket)),
                            // Si hay supermercados fuera del presupuesto, muestra la lista
                            if (nearby.isNotEmpty && farAway.isNotEmpty)
                              SizedBox(height: 20),
                            if (farAway.isNotEmpty)
                              Text(
                                  'Tu presupuesto no alcanza para comprar aqu铆'),
                            ...farAway.map((supermarket) => Text(supermarket)),
                          ],
                        ),
                        actions: [
                          // Bot贸n para cerrar el cuadro de di谩logo
                          IconButton(
                            icon: Icon(Icons.close),
                            onPressed: () {
                              Navigator.pop(context); // Cierra el cuadro de di谩logo
                            },
                          ),
                        ],
                      ),
                    );
                  } else {
                    // Si el monto ingresado no es v谩lido, muestra un mensaje de error
                    ScaffoldMessenger.of(context).showSnackBar(SnackBar(
                      content: Text(
                          'Por favor, ingresa un monto v谩lido de al menos 3 cifras.'),
                    ));
                  }
                },
                child: Text('Calcular'), // Texto del bot贸n
              ),
            ],
          ),
        ),
      ),
    );
  }
}
// Pantalla principal del men煤
class MenuScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con t铆tulo "Men煤" y color de fondo azul
      appBar: AppBar(
        title: Text("Men煤"),
        backgroundColor: Colors.blue,
      ),
      // Cuerpo de la pantalla que muestra una lista de opciones
      body: ListView(
        children: [
          // Elemento de la lista para navegar a la pantalla de contacto
          ListTile(
            title: Text('Cont谩ctanos'), // Texto del elemento
            onTap: () {
              // Navega a la pantalla de contacto al tocar el elemento
              Navigator.push(
                context,
                MaterialPageRoute(builder: (context) => ContactScreen()),
              );
            },
          ),
          // Elemento de la lista que muestra informaci贸n sobre la app
          ListTile(
            title: Text('Acerca de la app'), // Texto del elemento
            onTap: () {
              // Muestra un cuadro de di谩logo con informaci贸n de la aplicaci贸n
              showDialog(
                context: context,
                builder: (context) => AlertDialog(
                  title: Text('Bendiciones'), // T铆tulo del di谩logo
                  content: Column(
                    mainAxisSize: MainAxisSize.min, // Ajusta el tama帽o del contenido
                    children: [
                      // Descripci贸n breve de la finalidad de la app
                      Text(
                          'Esta app busca ayudarte a combatir la inflaci贸n al comparar precios de la canasta b谩sica.'),
                      SizedBox(height: 20), // Espacio entre elementos
                      // Informaci贸n adicional sobre la app
                      Text(
                        'Ahorro Express es una app en desarrollo sin fines de lucro, pensada para favorecer la econom铆a de los mexicanos.',
                        textAlign: TextAlign.center, // Centra el texto
                      ),
                      SizedBox(height: 20), // Espacio entre elementos
                      // Informaci贸n de derechos reservados
                      Text('Ahorro Express 2024c.'),
                    ],
                  ),
                  actions: [
                    // Bot贸n para cerrar el cuadro de di谩logo
                    TextButton(
                      onPressed: () {
                        Navigator.pop(context); // Cierra el cuadro de di谩logo
                      },
                      child: Text('Cerrar'), // Texto del bot贸n
                    ),
                  ],
                ),
              );
            },
          ),
        ],
      ),
    );
  }
}

// Pantalla de contacto
class ContactScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // Barra de la aplicaci贸n con t铆tulo "Cont谩ctanos" y color de fondo azul
      appBar: AppBar(
        title: Text('Cont谩ctanos'),
        backgroundColor: Colors.blue,
      ),
      // Cuerpo de la pantalla con informaci贸n de contacto
      body: Padding(
        padding: const EdgeInsets.all(16.0), // Espaciado alrededor del contenido
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start, // Alinea el contenido a la izquierda
          children: [
            // Nombre de la empresa
            Text(
              'Empresa: Ahorro Express Software',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            SizedBox(height: 10), // Espacio entre elementos
            // Informaci贸n de contacto: email, tel茅fono y direcci贸n
            Text('Email: contacto@ahorroexpress.com'),
            Text('Tel茅fono: +52 55 1234 5678'),
            Text('Direcci贸n: Calle Falsa 123, Ciudad de M茅xico, MX'),
          ],
        ),
      ),
    );
  }
}
